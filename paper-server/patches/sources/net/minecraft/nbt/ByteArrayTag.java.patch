--- a/net/minecraft/nbt/ByteArrayTag.java
+++ b/net/minecraft/nbt/ByteArrayTag.java
@@ -1,3 +1,4 @@
+// mc-dev import
 package net.minecraft.nbt;
 
 import java.io.DataInput;
@@ -24,6 +25,7 @@
         private static byte[] readAccounted(DataInput input, NbtAccounter tracker) throws IOException {
             tracker.accountBytes(24L);
             int i = input.readInt();
+            com.google.common.base.Preconditions.checkArgument( i < 1 << 24); // Spigot
 
             tracker.accountBytes(1L, (long) i);
             byte[] abyte = new byte[i];
